<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat - <%= user.username %>
  </title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="/css/chatstyles.css">
</head>

<body>
  <%- include('partials/header') %>

    <main class="container-fluid">
      <div id="chatContainer" class="row">
        <!-- Online Friends -->
        <div id="onlineFriends" class="col-md-3 d-none d-md-block">
          <input type="text" id="searchBox" placeholder="Search..." class="form-control mb-3">
          <h4>Online Friends</h4>
          <ul id="onlineFriendsList" class="list-group">
            <!-- Online friends will be dynamically populated here -->
          </ul>
        </div>

        <div id="onlineFriendsDropdown" class="d-md-none">
          <button class="btn btn-primary w-100" type="button" data-toggle="collapse"
            data-target="#onlineFriendsListCollapse" aria-expanded="false" aria-controls="onlineFriendsListCollapse">
            Online Friends
          </button>
          <div id="onlineFriendsListCollapse" class="collapse">
            <input type="text" id="searchBox" placeholder="Search..." class="form-control mb-3">
            <ul id="onlineFriendsList" class="list-group">
              <!-- Online friends will be dynamically populated here -->
            </ul>
          </div>
        </div>

        <!-- Chat Messages -->
        <div id="chatMessages" class="col-md-9 d-flex flex-column">
          <div id="chatHeader" class="mb-3"></div>
          <!-- Chat messages will be dynamically populated here -->

          <!-- Message Input -->
          <div id="messageInputContainer" class="mt-3">
            <form id="messageForm" class="d-flex">
              <input type="text" class="form-control" id="messageInput" placeholder="Type your message..."
                aria-label="Message input">
              <button class="btn btn-primary ml-2" type="submit" aria-label="Send message">
                <i class="fas fa-paper-plane"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <script>
      const loggedInUserId = '<%= user._id %>';
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/chat.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>